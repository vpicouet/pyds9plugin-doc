<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://vpicouet.github.io/pyds9plugin-doc/philosophy/">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Development philosophy - pyds9plugin doc</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">pyds9plugin doc</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../install/" class="dropdown-item">Installation</a>
</li>
                                    
<li>
    <a href="../user/" class="dropdown-item">Tutorials</a>
</li>
                                    
<li>
    <a href="../feature/" class="dropdown-item">Important features</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Videos</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../videos_multi/" class="dropdown-item">Multi-image processing</a>
</li>
            
<li>
    <a href="../videos_instru/" class="dropdown-item">Instrumentation</a>
</li>
            
<li>
    <a href="../videos_soft/" class="dropdown-item">Software</a>
</li>
            
<li>
    <a href="../videos_generic/" class="dropdown-item">Generic</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="./" class="dropdown-item active">Development philosophy</a>
</li>
                                    
<li>
    <a href="../concept/" class="dropdown-item">Concept and implementation</a>
</li>
                                    
<li>
    <a href="../license/" class="dropdown-item">License</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../videos_generic/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../concept/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#motivation" class="nav-link">Motivation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#existing-tools" class="nav-link">Existing tools</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#existing-tools-strengths-and-weaknesses" class="nav-link">Existing tools, strengths and weaknesses</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#the-need-for-collaborative-development" class="nav-link">The need for collaborative development</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#goals" class="nav-link">Goals</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#boosting-interaction-with-scientific-images" class="nav-link">Boosting interaction with scientific images</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#turning-a-visualization-software-into-an-image-processing-software" class="nav-link">Turning a visualization software into an image processing software</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#building-a-code-collaboration-catalyst" class="nav-link">Building a code collaboration catalyst</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#the-choice-of-saoimage-ds9" class="nav-link">The choice of SAOImage DS9</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#discussion-and-conclusion" class="nav-link">Discussion and conclusion</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="motivation">Motivation</h1>
<p>Current fits viewer applications (<code>SAOImage DS9</code>, <code>Aladin</code>, <code>GINGA</code>,
<code>Glue</code>) have been developed to optimize the visualization of
astronomical images while keeping some interesting specificities:
linked-data exploration, interactive sky atlas access, flexible and
extensible visualization toolkit, etc. Not initially designed for image
processing, these applications do not address this need as it would
break their conceptual integrity (by dispersing their purpose). This
leaves it to big instrument consortiums who will design their own data
processing pipeline, which will, most of the time, be too specific to be
re-used by the astronomy community.</p>
<p>For the particular discipline of astronomy evolving towards Jim Gray's
fourth paradigm and where an essential part of the job
relies on image analysis, the lack of processing codes draws a new
challenge for current and future imaging software: mimicking what has
been done for bioimage analysis by addressing the current frontier of
image processing.</p>
<p>Among the different difficulties that need to be addressed to make the
processing software beneficial (catalyzing community collaboration and
code enhancement, multi-image analysis, extensibility), one key aspect
is to keep the essential high-level interactivity between the data and
the user, which became a consensual feature for visualization.</p>
<p>For various reasons that I will present, the
development of <em>plugins</em> for fits viewer applications represents an
exciting way to take up the challenge of developing image processing
tools and address the related difficulties.</p>
<p>I will then use introduce <code>pyds9plugin</code>: an attempt to design such a plugin. This <code>DS9</code> quick look plugin is a public domain versatile extension I designed for <code>DS9</code> visualization
software. The plugin pushes <code>DS9</code> visualization software a step further
by allowing to analyze and process in real-time images while keeping a
high level of interactivity. The processing functions can then be
generalized automatically to a set of images to turn the quick-look tool
into a multiprocessing pipeline.</p>
<p>This plugin incorporates essential functions (radial profile, 2D/3D
fitting, trough-focus, stacking, background removal, source/artifact
extraction, etc.) to extract quantitative and intelligible information
from imaging datasets in order to support instrumentation, reduce
observations, analyze data performance, etc. We also linked the most
famous astronomical codes (<code>SExtractor</code>, <code>Swarp</code>, etc.) to the plugin to
allow research-grade analysis and processing. As all researchers have
different needs, the plugin is designed intelligibly to allow everyone
to add their own macros that can then be run quickly and automatically
on a set of images thanks to multiprocessing. This <code>pyds9plugin</code>,
available both on Pypi and Github, tries to gather a glimpse of all the
possibilities that offers <code>DS9</code> extensibility so that it motivates
astronomers exploring this development approach. This hybrid chapter
aims at giving an overview of the achieved work.</p>
<h1 id="existing-tools">Existing tools</h1>
<h2 id="existing-tools-strengths-and-weaknesses">Existing tools, strengths and weaknesses</h2>
<p>The different main existing software for image visualization/processing
are <a href="https://sites.google.com/cfa.harvard.edu/saoimageds9">SAOImageDS9</a>,
<a href="https://aladin.u-strasbg.fr/AladinDesktop/">Aladin</a>,
<a href="https://ginga.readthedocs.io/en/stable/">Ginga</a> and
<a href="https://glueviz.org">GlueViz</a>. Some other non-astronomy-related image
processing codes have developed astronomy plugins like
<a href="https://imagej.nih.gov/ij/">ImageJ</a> and
<a href="http://icy.bioimageanalysis.org">Icy</a>. Next Figure sum up each software approach and
different characteristics as well as their different strengths and
weaknesses in terms of image visualization and processing. On a total of
about 127,000 downloads, <code>Aladin</code>, <code>DS9</code>, <code>GlueViz</code>, and <code>Ginga</code>
represent respectively 36%, 28%, 20%, and 8% percent of the
total downloads.
<img alt="caption" src="../fig/softs2.jpg" /></p>
<p>There seems to be some consensus on the interest of plugins to extend
the possibilities of each software as only one software does not
currently allow it. It also appears difficult for applications to
incorporate the different listed functionality as native features. Most
of the extensions need to be written in JAVA, some in Python, and <code>DS9</code>
allows to develop low-level plugins in basically any language as soon as
it supports <code>XPA</code> or <code>SAMP</code> communication.</p>
<h2 id="the-need-for-collaborative-development">The need for collaborative development</h2>
<p><code>DS9</code> lead developers remind that more bodies do not
equal better results by citing Fred Brooks: "<em>the [software] design
must proceed from one mind, or from a very small number of agreeing
resonant minds</em>". Even though they believe that conceptual integrity
requires a small team of developers, they face an expanding pressure due
to the success of <code>DS9</code> and confess spending 80% of their time in
supporting users and maintaining/enhancing existing capabilities which
leaves them with only 20% of time to innovate on new functionality.
On the other side, I saw significant efforts in different teams to
develop project-related processing tools and pipelines to analyze
images, but they often are too specific to be re-used by the community
and then stay within the collaboration that produced them.</p>
<p>Agreeing with the fact that conceptual integrity requires a small team
which unfortunately leads to much less time to innovate when the product
gains maturity, it seems that the best compromise is the development of
plugins by the community:</p>
<ul>
<li>
<p>This allows important and free innovation that will not break the software's concept/purpose</p>
</li>
<li>
<p>Best interesting features/innovations that will emerge by themselves can then be merged into the initial software (as it has already been done for <code>DS9</code>, <code>GAIA</code>)</p>
</li>
<li>
<p>This is particularly true in the open astronomy community where collaborative development becomes extremely popular</p>
</li>
</ul>
<p>This modularity and plugin philosophy is used by the majority of the top
10 open-source software: <code>VLC</code>, <code>Libre Office</code>, <code>Firefox</code>,
<code>Thunderbird</code>, and by other fast-growing software: <code>Nextcloud</code>,
<code>Mattermost</code>, <code>Atom</code>. This trend is similar for open-source image
analysis software: <code>GIMP</code>, <code>ImageJ</code>, <code>GINGA</code>, <code>Icy</code>, <code>Starlink</code>, etc.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A plugin is a software component or module designed to extend the functionality of an existing software application. The application architecture determines where and how plugins can be embedded (for example, reading or writing new formats, accessing and processing image data, etc.). Open-source software, in  contrast to closed-source packages, often relies on plugins to  foster contributions and expertise from the community</p>
</div>
<h1 id="goals">Goals</h1>
<p>The goal is then to create a plugin that would fill the needs expressed above. The three different distant objectives that aim to make astronomers gain time are detailed below.</p>
<h2 id="boosting-interaction-with-scientific-images">Boosting interaction with scientific images</h2>
<p>The fact that astronomical data gets bigger is driving the way image
software and pipelines are designed. It seems that the workforce is more
directed towards developing specific applications (either
<strong>project-specific</strong>: single-project-related pipelines, or <strong>big-data
specific</strong>: web-hosted applications, neural-network-based analysis)
rather than improving comprehensive applications working at the pixel
layer and enhancing the interaction between the user and the data so
that it can be used by a broader community. Specific applications listed
above are important but will not fill the need that each astronomical
project requires at some point a local and high-performance image
processing software to work at the pixel level with improved
interactivity.
Current local and easy-to-use applications would still greatly benefit
from enhanced interactivity and ergonomy. They represent an excellent
test-bench opportunity to implement interactive features before
spreading them to other more complex applications (such as web-based or
big-data related). The plugin we present in this study will then focus
on trying to develop interactive features.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We call interaction a direct communication between the user and the software which is not only via the menu bar. All basic fits-viewers incorporate as native and interactive feature zooming, panning, rotating, changing scale limits. However, it could be pushed to the next level with, for instance, interaction with metadata (like regions of interest or catalogs), interactive detection and selection of sources, interactive plotting, and profile fitting, etc. Some work is ongoing to make some tools more interactive, but it is still in its infancy.</p>
</div>
<h2 id="turning-a-visualization-software-into-an-image-processing-software">Turning a visualization software into an image processing software</h2>
<p>Another aspect is that among all the fits-viewers, a minor fraction
allows some image processing (<code>GAIA</code> is the most advanced example but
does not seem to gather a vast community, <code>Icy</code> for bio-images,
AstroImageJ for light curves). Even though it is not their first
purpose, this leaves almost no software to perform basic image
processing (source extraction, background subtraction, radial profile,
light curve, focus analysis, one-line interpreters, macros, etc.).
Incorporating these features inside these fits-viewers might be
premature at this stage as it could break the software concept integrity
but spending time developing them as a plugin seems essential to make
scientists earn time in their research.</p>
<h2 id="building-a-code-collaboration-catalyst">Building a code collaboration catalyst</h2>
<p>A byproduct of such plugins would be that people would not need to
reinvent the wheel each time they need to perform some basic image
processing like a radial profile. Such a plugin could be written to
become a code collaboration catalyst which could then fill two important
needs:</p>
<ul>
<li>
<p>Help people process images with less time or coding proficiency as
    they could lean on tested and ready-to-use image processing modules
    instead of making them code existing things.</p>
</li>
<li>
<p>It could become a function aggregator for different types of
    structures (from the Ph.D. group of a given lab up to the astronomy
    community) where processing codes would be organized and maintained
    so that most of the written code within a lab stops disappearing
    each time a Ph.D. student leaves, or a senior researcher retires.</p>
</li>
</ul>
<p>The two issues (implementing existing code and losing unreleased code)
represent a significant amount of time/knowledge/money loss. To make
this possible the package:</p>
<ul>
<li>
<p>should be written in Python (because of the consensual
    implementation effort in this language in astronomy) as we aim to
    gather codes/community</p>
</li>
<li>
<p>must be intelligible so that it can be easily re-appropriated and
    modifiable so that people can add functions to the extension</p>
</li>
<li>
<p>allows running Macros directly</p>
</li>
</ul>
<p>The plugin we present in this study is a naive attempt to try to
initiate this tendency and gather a glimpse of the main possibilities
that fits-viewers plugins can offer.</p>
<h1 id="the-choice-of-saoimage-ds9">The choice of SAOImage DS9</h1>
<p><a href="https://sites.google.com/cfa.harvard.edu/saoimageds9"><code>SAOImage DS9</code></a>
is an astronomical imaging and data visualization application. It
gathers all of the other essential pieces of a modern fits viewer. Its
30 years of development has made it very stable and easy to use. Because
of this, it became an essential tool in all fields of astronomy
(observation, simulation, instrumentation). Much more profitable but
pretty unsung feature; its extensibility makes it a limitless tool to
interact with astronomical (or not) data. Unfortunately, it appears that
this extensibility did not inspire or generate a large collaborative and
well-organized effort to develop significant extensions that would
finally, years after years, converge towards a stable/rapid/configurable
DS9-affiliated package. The important strengths of <code>DS9</code> that governed
our choice are:</p>
<p><strong>Popularity:</strong> with ~35K downloads a year, <code>DS9</code> belongs to the
top two leaders in image visualization for astronomy. It also has the
closest purpose to what we aim to develop (more image-focused than
Aladin, even though it similarly accesses catalogs). It has a large
enough community so that designing low-level plugins could work.</p>
<p><strong>Any language extensibility:</strong> <code>DS9</code> architecture is set to accept
plugins, coded in any language by just sending a <code>Shell</code> command. This
is an essential strength in astronomy, where an unprecedented synergy
occurs around Python language.</p>
<p><strong>Stability and simplicity:</strong> With a "<em>Keep it simple</em>" golden rule and 30 years of development, <code>DS9</code> is incredibly simple and
stable, which will help the development of our initiative. Indeed such
initiatives can have downside effects such as fragmenting the existing
community by requiring specific formating/language/etc. <code>DS9</code> allows
ultra-simple extensibility with quasi no format requirement as it simply
sends background <code>Shell</code> commands that can call any extension and
control the GUI.</p>
<p><code>DS9</code> then seemed the perfect software to experiment such a plugin.</p>
<h1 id="discussion-and-conclusion">Discussion and conclusion</h1>
<p>In this chapter, I tried to stress the need for astronomical image
processing applications. I emphasize the different requirements of such
an application and explain why Python extensions for already proven
visualization software represent an exciting approach to address this
need. Based on this, I introduced <code>pyds9plugin</code>, a scientific project I
developed to illustrate this approach. This plugin has been developed
from the ground up, paying attention to three particular aspects:
addressing the need for image processing, enhancing the interaction
between the user and the data, and catalyzing collaboration for
processing functions.</p>
<p>Writing <code>DS9</code> plugins is an excellent way to develop data analysis
pipelines and quality assurance tasks by leveraging the combination of
the very efficient <code>DS9</code> application and the burgeoning number of
open-source astronomical Python modules.</p>
<p><code>pyds9plugin</code> gathers a glimpse of all possibilities offered by <code>DS9</code>
and stays, for now, a test bench to present such an approach. Even
though it still has a considerable number of challenges to face:
convince the future users, converge towards research-grade processing, scalability to larger datasets, etc., this chapter shows the ease of such an approach and its numerous benefits. Therefore, implementing processing codes this way generates a pretty high return on investment.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../javascripts/mathjax.js" defer></script>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6" defer></script>
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>

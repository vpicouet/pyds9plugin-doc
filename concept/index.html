<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://vpicouet.github.io/pyds9plugin-doc/concept/">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Concept and implementation - pyds9plugin doc</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fontawesome.min.css" rel="stylesheet">
        <link href="../css/brands.min.css" rel="stylesheet">
        <link href="../css/solid.min.css" rel="stylesheet">
        <link href="../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">pyds9plugin doc</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">User Guide</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../install/" class="dropdown-item">Installation</a>
</li>
                                    
<li>
    <a href="../user/" class="dropdown-item">Tutorials</a>
</li>
                                    
<li>
    <a href="../feature/" class="dropdown-item">Important features</a>
</li>
                                    
<li>
    <a href="../function/" class="dropdown-item">All the functions</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Videos</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../videos_multi/" class="dropdown-item">Multi-image processing</a>
</li>
            
<li>
    <a href="../videos_instru/" class="dropdown-item">Instrumentation</a>
</li>
            
<li>
    <a href="../videos_soft/" class="dropdown-item">Software</a>
</li>
            
<li>
    <a href="../videos_generic/" class="dropdown-item">Generic</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">About</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../philosophy/" class="dropdown-item">Development philosophy</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Concept and implementation</a>
</li>
                                    
<li>
    <a href="../license/" class="dropdown-item">License</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../philosophy/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../license/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/vpicouet/pyds9plugin-doc/edit/master/docs/concept.md" class="nav-link"><i class="fa-brands fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#a-pythonic-package" class="nav-link">A Pythonic package</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#the-way-it-works" class="nav-link">The way it works</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#communication" class="nav-link">Communication</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#running-a-function" class="nav-link">Running a function</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#logging-and-verbosity" class="nav-link">Logging and verbosity</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="a-pythonic-package">A Pythonic package</h1>
<p>For all the reasons cited above, we decided to create the first Pythonic
<code>DS9</code> plugin: <code>pyds9plugin</code>. It is a public domain <code>DS9</code> extension for
quick-look image processing. It aims to extract quantifiable information
from imaging datasets with improved interaction. The plugin processing
functions can then be generalized automatically to a set of images to
turn the quick-look tool into a multiprocessing pipeline.</p>
<p>It enables new users, from undergraduate students to full-time
researchers, to actively interact (process, model, plot, etc.) with
astronomical image data with one integrated software package. This
package, available both on Pypi and
<a href="https://github.com/vpicouet/pyds9plugin">GitHub</a>, has been extensively
used within the FIREBall project and for CLAUDS catalogs generation.
Before going any further, I highly recommend watching this <a href="https://www.youtube.com/watch?v=XcDm2JQDMLY">youtube
video</a> for a better
understanding of the package. The other videos that are linked in the
document to present some functionality are all gathered
<a href="https://people.lam.fr/picouet.vincent/pyds9plugin/examples/features.html">here</a>.</p>
<h1 id="the-way-it-works">The way it works</h1>
<p><code>DS9</code> incorporates the possibility to load extensions via an <em>analysis
file</em>. When the plugin is installed and the <em>analysis file</em> loaded into
the <code>DS9</code> analysis menu, the extension can be used. The <em>analysis
file</em> is the interface linking <code>DS9</code> GUI with the plugin's functions.
This file determines what menu is created within <code>DS9</code>, what parameters windows each
function launches, and what <code>Shell</code> command is interpreted. An example
parameter window is shown in next Figure.</p>
<p>Each <code>pyds9plugin</code> function is stored under <code>DS9Utils</code> access point, which links to
<code>pyds9plugin.DS9Utils</code> module. Then command lines begin by <code>DS9Utils</code>
followed by the function to be called and its arguments. <code>pyds9plugin</code>
will then communicate, control, and exchange data with <code>DS9</code> GUI via
<code>pyds9</code> package. The way the extension operates is illustrated in next.</p>
<p><img alt="caption" src="../fig/work.jpg" />
<em>Diagram representing the way the plugin is loaded within <code>DS9</code> and called. <code>pyds9plugin</code> can be called from the terminal (through command lines) which bypasses the need for <code>DS9</code> GUI.</em></p>
<h2 id="communication">Communication</h2>
<p>Within the <code>DS9</code> program, the <code>XPA</code> (X Public Access) messaging system
has been designed to provide seamless communication between <code>DS9</code> GUI
and other Unix programs (Perl, Tcl/Tk). It also provides an easy way for
users to communicate with <code>DS9</code> by executing <code>XPA</code> client <code>shell</code>
commands. The <code>pyds9</code> module uses a Python interface for <code>XPA</code> to
communicate with <code>DS9</code>. It supports communication with all of <code>DS9</code>'s
<code>XPA</code> access points in two ways. It enables read and write access to all
<code>DS9</code> parameters, which allows controlling the display (load images,
display <code>NumPy</code> arrays and catalogs, change parameters, create regions /
<code>DS9</code> plots, etc.). One interest in using Python is to use the full
capability of its famous packages such as <code>matplotlib</code>, which offers
other possibilities than the <code>DS9</code> native plotting GUI.</p>
<p><img alt="caption" src="../fig/params.jpg" />
<em><code>SExtractor</code> parameters window allows to show the different parameter possibilities offered by <code>DS9</code>.  In addition to different menu types (entry, menu, and checkboxes, file system browser), the addition of tabs allows navigating through an important number of organized parameters.</em></p>
<h2 id="running-a-function">Running a function</h2>
<p>All the functions are directly accessible from <code>DS9</code> GUI (within the
analysis menu). Accessing a function will make appear a parameter window
that will then call the plugin.</p>
<p>Navigating through the list of <code>DS9Utils</code> functions can be quite
cumbersome for newcomers. <code>OSX</code> built-in Command Finder / Launcher
provides an expeditive alternative that allows retrieving commands
extremely fast.</p>
<p>Some fundamental functions are available through shortcuts to gain time.
The shortcuts are noted between parenthesis next to the function's name. The functions having a shortcut are: Open (o), lock (l), radial profile (r).</p>
<p><img alt="caption" src="../fig/commands.jpg" />
<em><code>pyds9plugin</code>'s functions divided in the three sub-extensions: generic functions, instrumentation and astronomical software. The terminal icon emphasize functions that do not require <code>DS9</code> to be launched, which can be interesting for generalizing the processing on a server. Most of these functions (highlighted with the wheel icon) are compatible with multi-image and multi-threaded analysis. Functions with enhanced interactivity based on pickable meta-data for instance are marked with the  interactivity icon.</em>
<img alt="caption" src="../fig/command_finder.jpg" />
<em>Functions are divided into three main menus: Generic functions, Instrumentation-AIT, and Astronomical software, and can be easily accessible via the command finder in the analysis menu bar</em></p>
<h2 id="logging-and-verbosity">Logging and verbosity</h2>
<p>The functions are silent when launched from <code>DS9</code> and will only return
nominal outputs (images, regions, messages). If the code encounters an
error, the error message will pop up. If you run the same command from
the terminal, you will have, in addition, all the verbosity from
<code>pyds9plugin</code>. On top of that, all the logging is saved in
<span class="arithmatex">\(\sim\)</span><code>/DS9QuickLookPlugIn/pyds9plugin_activity.log</code> whether the
function is launched from the terminal or <code>DS9</code> user interface.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../javascripts/mathjax.js"></script>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
